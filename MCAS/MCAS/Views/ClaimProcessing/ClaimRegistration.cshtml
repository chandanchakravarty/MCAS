@using System;
@using MCAS.Web.Objects.Resources.ClaimProcessing;
@using MCAS.Web.Objects.Resources.Common;
@using MCAS.Web.Objects.CommonHelper;
@model MCAS.Web.Objects.CommonHelper.SearchCriteria
@using MCAS.Globalisation;
@{
    ViewBag.Title = "ClaimRegistration";
    Layout = "~/Views/Shared/_Layout.cshtml";
    var mMCASQueryString = Html.MCASQueryString(Request.QueryString);
    var caller = mMCASQueryString["claimMode"] != null ? Convert.ToString(mMCASQueryString["claimMode"]) : "";
    var lebmode = mMCASQueryString["mode"] != null ? Convert.ToString(mMCASQueryString["mode"]) : "";
    var SubMenu = !string.IsNullOrEmpty(Convert.ToString((HttpContext.Current.Session["ScreenNameDash"]))) ? MenuListItem.ClaimTabs.GetClaimLabel(Convert.ToString((HttpContext.Current.Session["ScreenNameDash"]))) : ClaimReserve.ResourceManager.GetString(MenuListItem.ClaimTabs.SubMenuString(@caller, "", @lebmode, "ClaimRegistration"));
    string isEncryptedParams = System.Configuration.ConfigurationManager.AppSettings["EncryptQueryParams"].ToUpper();
}
<style>
    td
    {
        word-break: break-all;
    }
    input[type=text], textarea
    {
        text-transform: capitalize;
    }
    body
    {
        overflow-y: scroll;
        overflow-x: hidden;
    }
    .ui-dialog-buttonset
    {
        margin-right: 40%;
    }
</style>
<script src="@Url.Content("~/Scripts/jquery-2.1.0.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/angular.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/McasWeb.js")" type="text/javascript"></script>
<script type="text/javascript">
  $(function () {
        PageModel = @(Html.Raw(Json.Encode(Model)));
});
</script>
<div id="divLoading" class="Claimloading">
    <p>
        Please wait...<br>
        <img src="@Url.Content("~/Images/ajax-loader.gif")" alt="Loading..">
    </p>
</div>
<div class="dashboard-wrapper" ng-app="ClaimRegistration">
    <div class="container" ng-controller="ClaimRegitrationController" id="reg3" ng-cloak>
        <div class="row page-title" id="reg">
            <div class="col-lg-12" id="reg2" style="background-color: white;">
                <h2>
                    @ClaimRegistration.ClaimRegistrations</h2>
                <ul class="breadcrumb">
                    <li>@SubMenu</li><li>@ClaimRegistration.SearchScreen</li>
                </ul>
            </div>
        </div>
        <hr />
        <div id="testdiv">
        </div>
        <div id="toprow">
            <div class="row">
                <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                    <div class="panel panel-secondary">
                        <div class="panel-heading">
                            <h3 class="panel-title">
                                <i class="icon-keyboard"></i>@MenuListItem.ClaimTabs.Entry(@caller)</h3>  
                            @*<div id="expanddiv" class="SearchCriteriaClose">
                            </div>*@
                            <div id="expanddiv" class="SearchCriteriaExpand">
                            </div>
                        </div>
                        <div class="panel-body" id="searchdiv" @*style="display: block"*@>
                            @using (Html.BeginForm("ClaimRegistration", "ClaimProcessing", new { claimMode = @caller }, FormMethod.Post, new { role = "form", @class = "form-horizontal", id = "ClaimRegistrationform", name = "ClaimRegistrationform" }))
                            {
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label for="inputClaimNo" class="col-sm-3 control-label">
                                                @ClaimRegistration.ClaimNo.</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" id="ClaimNo" ng-model="model.ClaimNo" name="inputClaimNo"
                                                    placeholder="" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label for="inputIPNo" class="col-sm-3 control-label">
                                                @ClaimRegistration.IPNo.</label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" id="IPNo" ng-model="model.IPNo" name="inputIPNo"
                                                    placeholder="" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label for="inputBusNo" class="col-sm-3 control-label">
                                                @ClaimRegistration.BusNo.
                                            </label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" id="BusNo" ng-model="model.vehicleNo" name="inputVehicleNo" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label for="inputDateofLoss" class="col-sm-3 control-label">
                                                @ClaimRegistration.DateofAccident@*<span class="text-danger">*</span>*@</label>
                                            <div class="col-sm-9">
                                                <input class="form-control datepicker" id="inputDateofLoss" ng-model="model.LossDate"
                                                    name="inputDateofLoss" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label for="inputText6" class="col-sm-3 control-label" style="padding-top: 2px!important;">
                                                @ClaimRegistration.ClaimantName
                                            </label>
                                            <div class="col-sm-9">
                                                <input type="text" class="form-control" id="ClaimantName" ng-model="model.ClaimantName"
                                                    name="inputinputTPSurname" />
                                            </div>
                                        </div>
                                    </div>
                                    <div class="col-lg-6">
                                        <div class="form-group">
                                            <label for="inputVehicleRegnNo" class="col-sm-3 control-label">
                                                @ClaimRegistration.ClaimantVehicleNo.</label>
                                            <div class="col-sm-9">
                                                <input class="form-control" id="VehicleRegnNo" ng-model="model.VehicleRegnNo" name="VehicleRegnNo" />
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div class="form-group text-center">
                                            <input type="button" class="btn btn-info" data-ng-click="GetPolicyList()" value='@Common.Search' />
                                            <input type ="hidden" ng-model="model.claimMode" id="hidclaimMode"  value='@Model.claimMode'/>
                                        </div>
                                    </div>
                                </div>
                            }
                        </div>
                    </div>
                </div>
            </div>
            <div id="divLoadingtable" class="Claimloading" ng-show="loading">
                <p>
                    Please wait...<br>
                    <img src="@Url.Content("~/Images/ajax-loader.gif")" alt="Loading..">
                </p>
            </div>
            <div class="row" id="divSearchresult" ng-show="divDisplay">
                <div class="col-lg-4">
                    @ClaimRegistration.Found <b>{{Claims.startlength}}</b> to <b>{{Claims.endlength}}</b>
                    @ClaimRegistration.Outof <b>{{Claims.Count}}</b> @ClaimRegistration.searchresults_
                </div>
                <div class="col-lg-4 text-center">
                    <h4 class="text-info">
                        @ClaimRegistration.SearchResults</h4>
                </div>
                <div class="col-lg-4 text-right">
                    <form action="" class="form-inline">
                    <b>@ClaimRegistration.Search: </b>
                    <input ng-model="query" id="querysearch" ng-change="change()" type="text" placeholder="Search"
                        autofocus="true" />
                    </form>
                </div>
                <div class="col-lg-12">
                    <hr />
                </div>
                                <div id="divLoadingtable" class="Claimloading" ng-show="loading">
                    <p>
                        Please wait...<br>
                        <img src="@Url.Content("~/Images/ajax-loader.gif")" alt="Loading..">
                    </p>
                </div>
                <div class="col-lg-12">
                    <div class="table-responsive">
                        <table class="table table-striped table-hover" ng-table="tableParams" id="Mcastable">
                            <thead>
                                <tr>
                                    <th style="width: 13%; padding-left: 9px" ng-click="orderByField=natural('ClaimNo'); orderByColumn='ClaimNo'; reverseSort = !reverseSort; order(natural('ClaimNo'),reverseSort)"
                                        ng-class="sortOrder(reverseSort,'ClaimNo')">
                                        @ClaimRegistration.ClaimNo.
                                    </th>
                                    <th style="width: 7%; padding-left: 9px" ng-click="orderByField='IPNo'; reverseSort = !reverseSort; order('IPNo',reverseSort)"
                                        ng-class="sortOrder(reverseSort,'IPNo')">
                                        @ClaimRegistration.IPNo.
                                    </th>
                                    <th style="width: 7%; padding-left: 9px" ng-click="orderByField='VehicleNo'; reverseSort = !reverseSort; order('VehicleNo',reverseSort)"
                                        ng-class="sortOrder(reverseSort,'VehicleNo')">
                                        @ClaimRegistration.BusNo.
                                    </th>
                                    <th style="width: 10%; padding-left: 9px" ng-click="orderByField='AccidentDate'; reverseSort = !reverseSort; order('AccidentDate',reverseSort)"
                                        ng-class="sortOrder(reverseSort,'AccidentDate')">
                                        @ClaimRegistration.DateofAccident
                                    </th>
                                    <th style="width: 10%; padding-left: 9px" ng-click="orderByField='TPSurname'; reverseSort = !reverseSort; order('TPSurname',reverseSort)"
                                        ng-class="sortOrder(reverseSort,'TPSurname')">
                                        @ClaimRegistration.ClaimantName
                                    </th>
                                    <th style="width: 10%; padding-left: 9px" ng-click="orderByField='VehicleRegnNo'; reverseSort = !reverseSort; order('VehicleRegnNo',reverseSort)"
                                        ng-class="sortOrder(reverseSort,'VehicleRegnNo')">
                                        @ClaimRegistration.ClaimantVehicleNo.
                                    </th>
                                    <th style="width: 4%; padding-left: 9px" ng-click="orderByField='ClaimType'; reverseSort = !reverseSort; order('ClaimType',reverseSort)"
                                        ng-class="sortOrder(reverseSort,'ClaimType')">
                                        @ClaimRegistration.ClaimType
                                    </th>
                                    <th style="width: 10%; padding-left: 9px" ng-click="orderByField='ClaimDate'; reverseSort = !reverseSort; order('ClaimDate',reverseSort)"
                                        ng-class="sortOrder(reverseSort,'ClaimDate')">
                                        @ClaimRegistration.ClaimDate
                                    </th>
                                    <th style="width: 8%; padding-left: 9px" ng-click="orderByField='claimantStatus'; reverseSort = !reverseSort; order('claimantStatus',reverseSort)"
                                        ng-class="sortOrder(reverseSort,'claimantStatus')">
                                        @ClaimRegistration.ClaimantStatus
                                    </th>
                                    <th style="width: 10%; padding-left: 9px" ng-click="orderByField='ClaimOfficer'; reverseSort = !reverseSort;order('ClaimOfficer',reverseSort)"
                                        ng-class="sortOrder(reverseSort,'ClaimOfficer')">
                                        @ClaimRegistration.CO
                                    </th>
                                    <th style="width: 11%">
                                        @ClaimRegistration.Action
                                    </th>
                                </tr>
                            </thead>
                            <tbody>
                                @{
                                    var viewMode = "Write";

                                    switch (@caller)
                                    {
                                        case ("New"):
                                            { viewMode = "Write"; break; }
                                        case ("Incomplete"):
                                            { viewMode = "Write"; break; }
                                        case ("Adjustment"):
                                            { viewMode = "Write"; break; }
                                        case ("RegEnquiry"):
                                            { viewMode = "Read"; break; }
                                        default:
                                            { viewMode = caller == "" ? "Read" : caller; break; }
                                    }
                                    
                                    <tr ng-repeat="item in Claimsfiltered = (Claims|MCASWebFilter:query:'ClaimNo,IPNo,VehicleNo,AccidentDatestr,TPSurname,VehicleRegnNo,ClaimType,ClaimDatestr,claimantStatus,ClaimOfficer')
                                     ">
                                        <td>
                                            {{item.ClaimNo}}
                                        </td>
                                        <td>
                                            {{item.IPNo}}
                                        </td>
                                        <td>
                                            {{item.VehicleNo}}
                                        </td>
                                        <td>
                                            {{item.AccidentDatestr}}
                                        </td>
                                        <td>
                                            {{item.TPSurname}}
                                        </td>
                                        <td>
                                            {{item.VehicleRegnNo}}
                                        </td>
                                        <td>
                                            {{item.ClaimType}}
                                        </td>
                                        <td>
                                            {{item.ClaimDatestr}}
                                        </td>
                                        <td>
                                            {{item.claimantStatus}}
                                        </td>
                                        <td>
                                            {{item.ClaimOfficer}}
                                        </td>
                                        <td>
                                            @{
                                                if (@caller == "New")
                                                {
                                                <a Url="~/ClaimProcessing/ClaimAccidentEditorNew?policyId={{item.PolicyId}}&claimMode=@viewMode" class = "btn btn-xs btn-info orgCatAccess">
                                                    @Common.Select</a>
                                                }
                                                else if (@caller == "Incomplete")
                                                {
                                                <a Url="~/ClaimRegistrationProcessing/ClmAccDltPCNTXEditor?AccidentClaimId={{item.AccidentId}}&OrgCat={{item.InsurerType}}&policyId={{item.PolicyId}}&claimMode=@viewMode" class = "btn btn-xs btn-info orgCatAccess" ng-if="item.InsurerType=='TX' || item.InsurerType=='PC'">
                                                    @Common.Select</a>
                                                <a Url="~/ClaimProcessing/ClaimAccidentEditor?AccidentClaimId={{item.AccidentId}}&policyId={{item.PolicyId}}&OrgCat={{item.InsurerType}}&claimMode=@viewMode" class = "btn btn-xs btn-info orgCatAccess" ng-if="item.InsurerType=='BU' || item.InsurerType=='TR'">
                                                    @Common.Select</a>
                                                <a url="~/ClaimProcessing/ClaimAccidentDetails?AccidentClaimId={{item.AccidentId}}"
                                                    class="btn btn-xs btn-info link" ng-hide="item.IsReported==1 || item.IsReadOnly==1">
                                                    @ClaimRegistration.Link</a>
                                                <label ng-show="item.LinkedClaimNo!=''">
                                                    @ClaimRegistration.Linkedto {{item.LinkedClaimNo}}</label>
                                                <a url="{{item.AccidentId}}" class="btn btn-xs btn-info unlink" ng-show="item.IsReported==1 && item.IsLinkedWithUnReported==true">
                                                    @ClaimRegistration.UnLink</a>
                                                }
                                                else if (@caller == "Adjustment")
                                                {
                                                <a Url="~/ClaimRegistrationProcessing/ClmAccDltPCNTXEditor?AccidentClaimId={{item.AccidentId}}&OrgCat={{item.InsurerType}}&policyId={{item.PolicyId}}&claimMode=@viewMode&mode=Adj" class = "btn btn-xs btn-info orgCatAccess" ng-if="item.InsurerType=='TX' || item.InsurerType=='PC'">
                                                    @Common.Select</a>
                                                <a Url="~/ClaimProcessing/ClaimAccidentDetails?AccidentClaimId={{item.AccidentId}}&OrgCat={{item.InsurerType}}&claimMode=@viewMode&mode=Adj" class = "btn btn-xs btn-info orgCatAccess" ng-if="item.InsurerType=='BU' || item.InsurerType=='TR'">
                                                    @Common.Select</a>
                                                <a url="{{item.AccidentId}}" class="btn btn-xs btn-info unlink" ng-show="item.IsReported==1 && item.IsLinkedWithUnReported==true">
                                                    @ClaimRegistration.UnLink</a>
                                                }
                                                else if (@caller == "RegEnquiry")
                                                {
                                                <a Url="~/ClaimProcessing/ClaimAccidentDetails?AccidentClaimId={{item.AccidentId}}&claimMode=@viewMode&mode=Enq" class = "btn btn-xs btn-info orgCatAccess">
                                                    @Common.Select</a>
                                                }
                                                else
                                                {
                                                <a Url="~/ClaimProcessing/ClaimAccidentDetails?AccidentClaimId={{item.AccidentId}}&claimMode=@viewMode&clmstatus=@caller" class = "btn btn-xs btn-info orgCatAccess">
                                                    @Common.Select</a>
                                                }
                                            }
                                        </td>
                                    </tr>
                                }
                            </tbody>
                            <tfoot>
                                <td colspan="12">
                                    <div class="col-lg-12 text-center">
                                        <ul class="pagination no-margin">
                                            <li ng-class="prevPageDisabled()"><a href ng-click="prevPage()">« @ClaimRegistration.Prev</a>
                                            </li>
                                            <li ng-repeat="n in range(Claims.Count)" ng-class="{active: n == currentPage}" ng-click="GetPagList(n)">
                                                <a href="#">{{n+1}}</a> </li>
                                            <li ng-class="nextPageDisabled()"><a href ng-click="nextPage()">@Common.Next »</a>
                                            </li>
                                        </ul>
                                    </div>
                                </td>
                            </tfoot>
                        </table>
                    </div>
                </div>
                <div id="dialog">
                </div>
                <div id="divAlert">
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">


    var do_on_load = function () {
        $("#inputDateofLoss").datepicker({
            dateFormat: "dd/mm/yy",
            showStatus: true,
            showWeeks: true,
            currentText: 'Now',
            autoSize: true,
            gotoCurrent: true,
            showAnim: 'blind',
            highlightWeek: true,
            changeMonth: !0,
            changeYear: !0,
            yearRange: "1951:2050",
            onSelect: function (a) {
                $(this).valid()
            }
        });
        $('#querysearch').keypress(function (event) {
            return (event.type.which ? event.type.which : event.keyCode) != 13;
        });
        $("#inputDateofLoss").change(function (event) {
            if ($(this).val() != "" && $(this).val() != 'DD/MM/YYYY') {
                if (!/^(?:(?:31(\/|-|\.)(?:0?[13578]|1[02]))\1|(?:(?:29|30)(\/|-|\.)(?:0?[1,3-9]|1[0-2])\2))(?:(?:1[6-9]|[2-9]\d)?\d{2})$|^(?:29(\/|-|\.)0?2\3(?:(?:(?:1[6-9]|[2-9]\d)?(?:0[48]|[2468][048]|[13579][26])|(?:(?:16|[2468][048]|[3579][26])00))))$|^(?:0?[1-9]|1\d|2[0-8])(\/|-|\.)(?:(?:0?[1-9])|(?:1[0-2]))\4(?:(?:1[6-9]|[2-9]\d)?\d{2})$/.test($("#inputDateofLoss").val())) {
                    alert("Accident Date must be in 'dd/mm/yyyy' format.", "inputDateofLoss");
                    event.preventDefault();
                    return false;
                }
            }
        });
        $("body").delegate("a.btn.btn-xs.btn-info.orgCatAccess", "click", function () {
            var sPageURL = $(this)[0].getAttribute("Url");
            var substr = sPageURL.substring(1).split('&');
            var str = substr[0].split('?');
            var AccidentID = str[1].split('=');
            //            var policyId = substr[1].split('=');
            //            var claimMode = substr[2].split('=');
            redirectByAjax(sPageURL, AccidentID);
            //            var selectInComBtn = $(this).hasClass("selectInCom");
            //            if (selectInComBtn == true) {
            //                $.ajax({
            //                    type: "POST",
            //                    url: '@Url.Action("CheckOrgTypeForAccident", "ClaimProcessing")',
            //                    data: {
            //                        AccidentClaimId: parseInt(AccidentID[1]),
            //                        PolicyId: parseInt(policyId[1]),
            //                        ClaimMode: claimMode[1]
            //                    },
            //                    success: function (resultdata, event) {
            //                        sPageURL = resultdata.url;
            //                        redirectByAjax(sPageURL, AccidentID);
            //                    },
            //                    error: function (resultdata) {
            //                        console.log(resultdata);
            //                    }
            //                });
            //            } else {
            //                redirectByAjax(sPageURL, AccidentID);
            //            }
        });
        function redirectByAjax(sPageURL, AccidentID) {
            $.ajax({
                type: "POST",
                url: '@Url.Action("GetUserAccessOrganization", "ClaimProcessing")',
                data: {
                    AccidentID: AccidentID[1]
                },
                success: function (resultdata, event) {
                    if (resultdata != true) {
                        return alert("You don't have access to that organization."), !1;
                        event.preventDefault();
                    }
                    else {
                        if ('@isEncryptedParams' == "YES") {
                            $.ajax({
                                type: "POST",
                                url: '@Url.Action("GetEncryptedUrl", "ClaimProcessing")',
                                data: {
                                    Url: sPageURL
                                },
                                success: function (data) {
                                    window.location.href = data;
                                }
                            });
                        }
                        else {
                            window.location.href = sPageURL;
                        }
                    }
                },
                error: function (resp) {
                    console.log(resp);
                }
            });
        }
        //Start By Jitendra
        $("body").delegate("#Mcastable a.btn.btn-xs.btn-info.link", "click", function () {
            var sPageURL = $(this)[0].getAttribute("Url");
            var AccidentID = sPageURL.split('=');
            $('#dialog').dialog({
                autoOpen: true,
                width: 800,
                height: 500,
                resizable: true,
                draggable: true,
                title: 'Reported Claim List',
                modal: true,
                open: function (event, ui) {
                    $('#dialog').css('overflow', 'hidden');
                    $('.ui-dialog-buttonpane').find('button:contains("Link")').removeClass('ui-state-default ui-state-focus').addClass('btn btn-xs btn-info');
                    $('.ui-dialog-buttonpane').find('button:contains("Close")').removeClass('ui-state-default ui-state-focus').addClass('btn btn-xs btn-info');
                    $("button").mouseover(function () {
                        $('button').removeClass("ui-state-hover");
                    });
                    $(this).load('@Url.Action("ReportedClaimList", "ClaimProcessing")?AccidentID=' + AccidentID[1] + '');

                },
                buttons: {
                    "Link": function () {
                        linkClaim();
                    },
                    "Close": function () {
                        $(this).dialog("close");
                    }
                }
            });
        });



        $("body").delegate("#Mcastable a.btn.btn-xs.btn-info.unlink", "click", function () {
            var AccidentID = $(this)[0].getAttribute("Url");
            if (confirm("Are you sure, you want to UnLink this Claim?") == true) {
                $.ajax({
                    url: '@Url.Action("UnLinkReportedList", "ClaimProcessing")',
                    type: 'POST',
                    data: { ReportedClaimAccidentId: AccidentID },
                    success: function (data) {
                        if (data.result) {
                            $('<div></div>').dialog({
                                modal: true,
                                title: "Alert",
                                open: function () {
                                    var markup = 'Claim UnLinked Successfully.';
                                    $(this).html(markup);
                                },
                                buttons: {
                                    Ok: function () {
                                        $(this).dialog("close");
                                        window.location.reload(true);
                                    }
                                }
                            });
                        }
                        else {
                            alert(data.responseText);
                        }
                    }
                });
            }
        });

        DivPostionClaimregistration();
        //End By Jitenra
    };
    $(document).ready(do_on_load);
    $(window).bind('page:change', do_on_load);



    function DivPostionClaimregistration() {
        $("#sidebar").css("position", "fixed").css("z-index", "1033");
        $("#header").addClass("navbar-fixed-top");
        $("#reg2").css("top", $("#header").height());
        $("#testdiv").css("height", parseInt($("#reg").height()) + parseInt($("#reg2").height()));
        $.culture = Globalize.culture("en-GB");
        $.validator.methods.date = function (a, b) {
            return this.optional(b) || Globalize.parseDate(a, "dd/MM/yyyy", "en-GB") || Globalize.parseDate(a, "yyyy-mm-dd")
        };
    };
    function isTabOrBrowserCloseed() {
        validNavigation = false;

        // Attach the event click for all links in the page
        $("a").bind("click", function () {
            validNavigation = true;
        });
    }
    function linkClaim() {
        //alert($('input[name=AccidentClaimCheck]:checked', '#ReportedClaimList').val());
        if (!$('input[name=AccidentClaimCheck]', '#ReportedClaimList').is(':checked')) {
            alert('Please select atleast one item from the list');
        }
        else {
            if (confirm("Are you sure, you want to link this Claim?") == true) {
                $.ajax({
                    url: '@Url.Action("LinkReportedList", "ClaimProcessing")',
                    type: 'POST',
                    data: $("#ReportedClaimList").serialize(),
                    success: function (data) {
                        if (data.result) {
                            $(':input', '#ReportedClaimList')
                                      .not(':button, :submit, :reset, :hidden')
                                      .removeAttr('checked')
                                      .removeAttr('selected');
                            //alert('Linked successfully.');
                            //$('#dialog').dialog('close');
                            //window.location.reload(true);

                            $('<div></div>').dialog({
                                modal: true,
                                title: "Alert",
                                open: function () {
                                    var markup = 'Claim Linked Successfully.';
                                    $(this).html(markup);
                                },
                                buttons: {
                                    Ok: function () {
                                        $(this).dialog("close");
                                        $('#dialog').dialog('close');
                                        window.location.reload(true);
                                    }
                                }
                            });
                        }
                        else {
                            alert(data.responseText);
                        }
                    }
                });
            }
        }
    }
</script>
