@model IEnumerable<MCAS.Web.Objects.ClaimObjectHelper.ClaimPaymentInfo>
@{
    Layout = null;
 }
 @Html.Hidden("oldgroup", 1)
<div class="row">
    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
        <div class="panel panel-info">
            <div class="container">
                <div class="panel-body">
                    <section class="content-wrapper main-content clear-fix">
    @using (Html.BeginForm("ClaimPaymentall", "ClaimProcessing", FormMethod.Post, new { role = "form", @class = "form-horizontal", id = "ClaimPaymentform", name = "ClaimPaymentform" }))
    {
        <h5 class="text-info">
            Payment</h5>
        <hr />
          <div class="panel-body">
            <div class="col-lg-12">
                <div class="table-responsive">
                    <table class="table table-striped table-hover" border="1" cellpadding="0" cellspacing="0">
                        <thead>
                           <tr style="text-align:center;text-transform:capitalize;">
                            <td rowspan="2" >
                                    Sno
                                </td>
                               <td rowspan="2">
                                     Payment Type
                                </td>
                                <td rowspan="2">
                                    Payee
                                </td>
                                <td rowspan="2">
                                     Payment Due Date
                                </td>
                                <td colspan="2">
                                    Payment Amount
                                </td>
                                <td colspan="2">
                                    Previous Reverse
                                </td>
                                <td colspan="2">
                                   Current Reverse
                                </td>
                                 <td rowspan="2">
                                       Date
                                 </td>
                                 <td rowspan="2">
                                       User Name
                                 </td>
                            </tr>
                            <tr style="text-align:center;text-transform:capitalize;">
                            <td rowspan="2" style="border-top:solid thin;">
                                  Original 
                                </td>
                                <td rowspan="2" style="border-top:solid thin;">
                                    Local
                                </td>
                                <td rowspan="2" style="border-top:solid thin;">
                                  Original 
                                </td>
                                <td rowspan="2" style="border-top:solid thin;">
                                    Local
                                </td>
                                <td rowspan="2" style="border-top:solid thin;">
                                  Original 
                                </td>
                                <td rowspan="2" style="border-right:solid thin;border-top:solid thin;">
                                    Local
                                </td>
                             </tr>
                        </thead>
                        <tbody>
                            @{
        int trid = 1;
        int rowmatch = 0;
        int id1 = 0;
        int sno = 1;
        int sno1 = 0;
        var display = "";
        string id = TempData["res"].ToString().Split(',')[0].ToString();
        string[] id2 = TempData["res"].ToString().Split(',')[1].ToString().Split('*');
        foreach (var item in Model)
        {
            var dd = item.CreatedDate.ToString();
            if (rowmatch == 0)
            {
                if (sno1 == 0)
                {
                    sno = Convert.ToInt32(id2[sno1].ToString());
                    sno1 += 1;
                }
                <tr ngroup='@(trid)' style="display:@display;text-align:left;">
                                    <td style="text-transform:capitalize" colspan="12">
                                        @Html.DisplayFor(modelItem => item.ClaimantNo)
                                    </td>
                                </tr>
                                 
               
            }
            else if (id.Split('*')[rowmatch - 1].ToString() != id.Split('*')[rowmatch].ToString())
            {
                sno = Convert.ToInt32(id2[sno1].ToString());
                sno1 += 1;
                 <tr ngroup='@(trid)' style="display:@display;text-align:left;">
                                    <td style="text-transform:capitalize" colspan="12">
                                        @Html.DisplayFor(modelItem => item.ClaimantNo)
                                    </td>
                                </tr>
            }
           
                                <tr ngroup='@(trid)' style="display:@display;text-align:center;">
                                    <td style="">
                                        @sno
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.PaymentType)
                                    </td>
                                    <td>
                                        @Html.DisplayFor(modelItem => item.Payee)
                                    </td>
                                   <td>
                                        @Html.DisplayFor(modelItem => item.PaymentDueDate)
                                    </td>
                                    <td>
                                        &#36;
                                        @Html.DisplayFor(modelItem => item.PayableOrgAmt)
                                    </td>
                                    <td>
                                        &#36;
                                        @Html.DisplayFor(modelItem => item.PayableLocalAmt)
                                    </td>
                                    <td>
                                        &#36;
                                        @Html.DisplayFor(modelItem => item.PreReserveOrgAmt)
                                    </td>
                                    <td>
                                        &#36;
                                         @Html.DisplayFor(modelItem => item.PreReserveOrgAmt)
                                     </td>
                                    <td>
                                        &#36;
                                        @Html.DisplayFor(modelItem => item.FinalReserveOrgAmt)
                                    </td>
                                    <td>
                                        &#36;
                                         @Html.DisplayFor(modelItem => item.FinalReserveOrgAmt)
                                     </td>
                                    <td>
                                       @dd
                                    </td>
                                    <td>
                                       @Html.DisplayFor(modelItem => item.CreatedBy)
                                    </td>
                                </tr>
                            
            rowmatch += 1;
            sno -= 1;
            if (rowmatch > 9)
            {
                rowmatch = 0;
                trid += 1;
                display = "none";
            }
            id1 += 1;
        }}
                        </tbody>
                    </table>
                </div>
            </div>
            @{
        decimal count = (decimal)Model.Count() / 10;
        int totalcount = (int)Math.Ceiling(count);
            
                <div class="col-lg-12 text-center">
                    <ul class="pagination no-margin">
                        <li id="liprevious" onclick="Pagination('liprevious');"><a href="#">«</a> </li>
                        @for (int j = 0; j < totalcount; j++)
                        {
                            if (j == 0)
                            { 
                            <li id="li@(j + 1)" class="active" onclick="Pagination('li@(j + 1)');"><a href="#">@(j + 1)</a></li>
                            }
                            else
                            {
                                if (j > 4)
                                {
                            <li id="li@(j + 1)" style="display: none;" onclick="Pagination('li@(j + 1)');" ><a href="#">@(j + 1)</a></li>
                                }
                                else
                                { 
                            <li id="li@(j + 1)" onclick="Pagination('li@(j + 1)');" ><a href="#">@(j + 1)</a></li>
                                }
                            }
                        }
                        <li id="linext" onclick="Pagination('linext');"><a href="#">»</a> </li>
                    </ul>
                </div>
                <div class="col-lg-12">
                    &nbsp;</div>
            }
        </div>
    }
</section>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript">
$(document).ready(function () {
setTabActive('PaymentEditor');
$("#AccidentTab,#ClaimTab,#ThirdPartyTab,#NotesTab,#ReserveTab,#TransactionsTab,#AttachmentsTab,#ToDoTab,#ReverseEditor").removeClass("active");
            $("#PaymentEditor").addClass("active");
            $(".ui-dialog-title").removeClass("ui-dialog-title ").addClass("right");     
                });
                $(".ui-dialog-title").removeClass("ui-dialog-title ").addClass("right");     
function Pagination(c) {
    var a = Math.ceil(parseFloat(@Model.Count()/ 10));
    "linext" == c && (c = "li" + (parseInt($("#oldgroup").val()) == a ? a : parseInt($("#oldgroup").val()) + 1));
    var z = 1 == parseInt($("#oldgroup").val()) ? 1 : (parseInt($("#oldgroup").val()) - 1);
    "liprevious" == c && (c = "li" + z);
    var d = $("#oldgroup").val(),
        b = c.replace("li", "");
    $("#oldgroup").val(b);
    $("table tr[ngroup=" + d + "]").css("display", "none");
    $("table tr[ngroup=" + b + "]").css("display", "");
    $(".active").removeClass();
    $("#" + c).addClass("active");
    if (0 < a) 
    {
        for (i = 1; i <= a; i++) $("#li" + i).css("display", "none");
        if (1 < b) if (parseFloat(b) + 2 <= parseFloat(a)) for (i = parseFloat(2 == b ? 3 : b) - 2; i <= parseFloat(2 == b ? 3 : b) + 2; i++) i <= a && $("#li" + i).css("display", "");
        else for (i = parseFloat(a) - 4; i <= parseFloat(a); i++) $("#li" + i).css("display", "");
        else for (i = 1; 5 >= i; i++) $("#li" + i).css("display", "")
    }
    setTabActive('PaymentEditor');
};
    function setTabActive(c) {
    $("#myTab1").children().each(function (a, d) {
        d.id == c ? $(d).removeClass("active").addClass("active") : $(d).removeClass("active")
    });
};
</script>
